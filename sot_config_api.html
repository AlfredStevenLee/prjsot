<!DOCTYPE HTML>
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>

		<!-- 공용 header 삽입 부 -->
		<% include ./head_common.ejs %>
		<link rel="stylesheet" href="http://127.0.0.1:8080/css/sot_style.css" />
		<script src="http://127.0.0.1:8080/js/sot_toolkit.js"></script>

	</head>


	<body>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">
						<div class="inner">

							<!-- Header -->
							<% include ./logo_common.ejs %>

							<!-- Section -->
								<section id="sec_mem_conf">
									<header class="major">
										<h2>SOT API 설정</h2>
									</header>
									<div class="features">
										<article>
											<!--span class="icon fa-diamond"></span-->
											<div class="content">

												<div>
													<ul>
														<li>SOT API는 SOT쇼핑몰에 등록된 상품을 개인 또는 사업자가 운영하는 다른 사이트에 쉽게 연계될 수 있도록 기능을 제공합니다. </li>
														<li>API를 적용하면 기존 웹페이지의 컨텐츠 이미지, 글자 등에 상품 소개가 가능한 링크가 자동으로 생성되며 SOT쇼핑몰을 통해 등록 상품을 조회/구매 가능하도록 연계시킵니다.</li>
														<li>별도의 쇼핑몰 구축없이 기존 홈페이지를 쇼핑몰로 확장해서 페이지 방문자에게 보다 많은 서비스를 제공하고 매출을 올릴 수 있습니다.</li>
														<li>API 연계는 유료 가입이나 현재 한시적으로 무료 서비스 제공중입니다.<br>(가입비, 월운영료 없음)</li>
													</ul>
												</div>

												<div style="margin-top:50px">
													<h3>홈페이지에 HTML tag 추가로 API 사용</h3>
													<p>아래에 생성된 code를 상품 판매를 연계하고자 하는 웹페이지에 추가합니다.</p>
													<ul>
														<li><input type="checkbox" id="jquery_yn"><label for="jquery_yn">JQuery를 홈페이지에서 사용하지 않으면 체크(모르겠으면 체크해주세요)</label></li>
														<li>
															API Key : 판매자 등록시 기입된 이더리움 계정(지갑) 주소를 사용합니다.</br>
															<input type="text" id="ad_biz_code" value="<%-biz_wallet[0].biz_wallet%>" readonly>
													  </li>
														<li>
															기존 등록하신 상품중 노출하고자 하는 상품을 체크 (혹은 상품을 먼저 등록합니다)</br>
															<% if (prod_list == "NO_DATA") { %>
																<p>- 등록하신 상품이 없습니다. 상품을 먼저 등록해 주세요 -</p>
															<% } else { %>
																<select name="my_prod" id="my_prod" size="4" style="height:8em" multiple>
																	<%-prod_list%>
																</select>
															<% } %>
														</li>
												  </ul>
												  <input type="button" value="API 생성" onclick = "getApiCode()"><br><br>
													<p>아래 코드가 생성되면 &lt;link rel...&gt;, &lt;script...&gt; 태그와 &lt;shop-sot&gt;, &lt;shop-sot-apikey&gt; 태그부분을 홈페이지에 붙여 넣으세요.</p>
													<p>
														<ul>
															<li>&lt;script&gt; : sot 상품정보를 가지고 오기 위한 자바스크립트와 JQuery 입니다.</li>
															<li>&lt;link rel=...&gt; : 상품을 보여주기 위한 디자인용 CSS 파일입니다.</li>
															<li>&lt;shop-sot&gt; : 링크가 추가될 태그이며 item 속성은 sot에 등록된 상품번호입니다. 태그안의 text는 임의로 편집가능합니다.</li>
															<li>&lt;shop-sot-apikey&gt; : sot에 판매자로 등록시 입력한 계정주소 입니다.</li>
														</ul>
													</p>
													API 태그
												  <textarea id="result_code" style="height:200px">여기에 API sample code가 출력됩니다.</textarea>
												</div>
												미리보기
												<div id="api_preview" class="box" style="height:150px;overflow:auto">여기에 미리보기가 출력되고 우측 상단에 상품소개 Toolbar가 나타납니다.</div>

												<div style="margin-top:50px">
													<h3>일반 HTML을 이용한 연계</h3>
													<p>아래에 생성된 code를 상품 판매를 연계하고자 하는 웹페이지에 추가합니다.</p>
													<ul>
														<li>
															기존 등록하신 상품중 노출하고자 하는 상품을 체크 (혹은 상품을 먼저 등록합니다)</br>
															<% if (prod_list == "NO_DATA") { %>
																<p>- 등록하신 상품이 없습니다. 상품을 먼저 등록해 주세요 -</p>
															<% } else { %>
																<select name="my_prod_static" id="my_prod_static" size="4" style="height:8em" multiple>
																	<%-prod_list%>
																</select>
															<% } %>
														</li>
												  </ul>
												  <input type="button" value="HTML 코드 생성" onclick = "getApiCodeStatic()"><br><br>
													<p>아래 코드가 생성되면 상품별로 태그를 복사한 후 홈페이지의 원하는 부분에 붙여 넣습니다.</p>
													<p>
														<ul>
															<li>HTML의 style을 각 사이트의 테마에 맞게 고치거나 혹은 class를 이용해서 디자인 할 수 있습니다.</li>
														</ul>
													</p>
													API 태그
												  <textarea id="result_code_static" style="height:200px">여기에 API sample code가 출력됩니다.</textarea>
												</div>
												미리보기
												<div id="api_preview_static" class="box" style="height:150px;overflow:auto">여기에 미리보기가 출력됩니다.
												</div>

											</div>
										</article>
									</div>
								</section>

						</div>
					</div>

				<!-- 왼쪽 사이드바 include 부분 -->
				<% include ./sidebar_common.ejs %>

			</div>

	</body>


  <!--자바스크립트 기입부-->

	<script>

		function getApiCode() {
			var res = "<html> \r...\r   <head> \r";
			res += "      <link rel=\"stylesheet\" href=\"http://127.0.0.1:8080/css/sot_style.css\"/> \r";

			if($("#jquery_yn").is(":checked")) {
				res += "      <"+"script src='https:cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js'"+">\r      <"+"/script> \r";
			}

			res += "      <"+"script src=\"http:127.0.0.1:8080/js/sot_toolkit.js\""+"><"+"/script> \r   </head> \r";
			res += "... \r   <body> \r   ... \r";

			var contents = "";

			$("#my_prod option:selected").each(function(){
				contents += "<br>... your contents ...<br>\r";
				contents += "      <"+"shop-sot item=\""+$(this).val()+"\">"+$(this).text()+"<"+"/shop-sot> \r      ...\r";
			});

			contents += "      <shop-sot-apikey key=\""+$("#ad_biz_code").val()+"\">\r      </shop-sot-apikey>\r      ...\r";
			res += contents;
			res += "   </body>\r</html>";


			$("#result_code").text(res);

			$("#api_preview").html(contents);
			runUI();
		}



		function getApiCodeStatic() {

			var contents = "";

			$("#my_prod_static option:selected").each(function(){
			  contents += "<!-- 상품명 : "+$(this).text()+" code -->\r";
			  contents += "<div style='display:flex;display:-webkit-flex;border:1px solid #cccccc;width:300px;height:80px;border-radius:6px;box-shadow:3px 3px 10px grey;'>\r";
			  contents += "  <div style='width:100px'>\r";
			  contents += "    <img src='"+$(this).attr("img_url")+"' style='width:100%;height:100%'>\r";
			  contents += "  </div>\r";
			  contents += "  <div style='margin:8px;flex-direction:column;-webkit-flex-direction:column;width:180px'>\r";
			  contents += "    <div style='overflow:hidden;text-overflow:ellipsis;white-space:nowrap'>"+$(this).text()+"</div>\r";
			  contents += "    <div>"+$(this).attr("price_sot")+" SOT</div>\r";
			  contents += "    <div style='text-align:right;width:100%'><a href='http://127.0.0.1:8080/sot_view_product?prod_id="+$(this).val()+"&ad_biz_code="+$("#ad_biz_code").val()+"' target='_blank'>more</a></div>\r";
			  contents += "  </div>\r";
			  contents += "</div>\r";
				contents += "<!-- ------------------------ -->\r<br>\r\r\r";
			});

			$("#result_code_static").text(contents);

			$("#api_preview_static").html(contents);
		}


	</script>


</html>
